import { Component, OnInit, ViewChild, ElementRef, AfterViewInit } from '@angular/core';
import * as faceapi from 'face-api.js';
import { isNullOrUndefined } from 'util';
import { FaceMatcher } from 'face-api.js';
import { forEach } from '@angular/router/src/utils/collection';
import { QueueScheduler } from 'rxjs/scheduler/QueueScheduler';
import { environment } from '../../environments/environment';
import { HttpParams, HttpClient } from '@angular/common/http';
import { DatePipe } from '@angular/common';
declare var $:any;
declare var responsiveVoice:any;
const mihai_face = [
  new Float32Array([-0.06980730593204498, 0.08498384058475494, 0.07860806584358215, -0.04991234093904495, -0.07388263940811157, -0.006412492133677006, -0.06348494440317154, -0.004184123128652573, 0.10572600364685059, -0.07908362150192261, 0.17667262256145477, 0.02097627893090248, -0.14113378524780273, 0.009740852750837803, -0.07519382238388062, 0.0665326863527298, -0.1299821138381958, -0.1373276710510254, -0.07794072479009628, -0.0801791399717331, 0.09183578193187714, 0.06647295504808426, -0.08126506209373474, 0.057574525475502014, -0.13387444615364075, -0.31341084837913513, -0.05249781161546707, -0.0568966418504715, 0.13476866483688354, -0.1339617669582367, -0.01870945654809475, -0.024182554334402084, -0.18769454956054688, 0.00533386692404747, -0.004338996484875679, 0.03134460747241974, -0.00978057086467743, -0.11798860132694244, 0.1920301616191864, 0.10881861299276352, -0.16595126688480377, 0.07488098740577698, 0.015055807307362556, 0.33139899373054504, 0.19720660150051117, 0.025368163362145424, 0.04113851115107536, -0.079018235206604, 0.21648941934108734, -0.2820037007331848, 0.13216494023799896, 0.15596327185630798, 0.09266658872365952, 0.08514371514320374, 0.10815507173538208, -0.1700543463230133, -0.00973043404519558, 0.13113264739513397, -0.19620439410209656, 0.12761294841766357, -0.0008193235844373703, 0.06486443430185318, 0.0069338176399469376, -0.13021345436573029, 0.12333965301513672, 0.07709279656410217, -0.10955990850925446, -0.13686533272266388, 0.1359941065311432, -0.1654481440782547, -0.03981073200702667, 0.08978963643312454, -0.07567256689071655, -0.1823294311761856, -0.22230306267738342, 0.14201045036315918, 0.48642322421073914, 0.2657410800457001, -0.16739560663700104, 0.057500604540109634, -0.04032019525766373, -0.09638514369726181, 0.10949675738811493, 0.0654357373714447, -0.09619524329900742, 0.03923638164997101, -0.041137129068374634, 0.0788733959197998, 0.22124584019184113, 0.09762328863143921, -0.064699687063694, 0.22441203892230988, 0.004983250983059406, 0.043087445199489594, 0.015717381611466408, 0.0350913368165493, -0.16985830664634705, 0.01656324788928032, -0.12885065376758575, -0.05762594938278198, -0.007259678561240435, -0.028301076963543892, 0.013595866039395332, 0.12857143580913544, -0.1617104411125183, 0.22807396948337555, 0.000799894449301064, -0.008406860753893852, -0.03971162438392639, 0.058193422853946686, -0.12492341548204422, 0.030798830091953278, 0.10973258316516876, -0.22679823637008667, 0.15186287462711334, 0.12183573096990585, 0.13682933151721954, 0.13993175327777863, 0.12415239214897156, -0.010150758549571037, 0.06326200813055038, -0.0485277958214283, -0.16132719814777374, -0.05567524954676628, 0.0444088950753212, -0.045604407787323, 0.06925049424171448, 0.020938852801918983]),
  new Float32Array([-0.12491217255592346, 0.024936307221651077, 0.05554594844579697, -0.008691299706697464, -0.10711239278316498, 0.005634733475744724, -0.046258796006441116, -0.006739403121173382, 0.15933340787887573, -0.11043424904346466, 0.1526729315519333, -0.008637471124529839, -0.1613127887248993, -0.005689701065421104, -0.060237783938646317, 0.07249253243207932, -0.1528727412223816, -0.1219557374715805, -0.05255778133869171, -0.03560454398393631, 0.09427378326654434, 0.10430639237165451, -0.00804748572409153, 0.08135725557804108, -0.18236246705055237, -0.3458346724510193, -0.12961681187152863, -0.09793038666248322, 0.11642102897167206, -0.08631141483783722, -0.047408975660800934, -0.013974258676171303, -0.1956770122051239, -0.04077988862991333, -0.013363424688577652, 0.04129568859934807, 0.0261908620595932, -0.10937276482582092, 0.16450493037700653, 0.09054941684007645, -0.19384247064590454, 0.027851082384586334, 0.030779391527175903, 0.2984583377838135, 0.14513486623764038, 0.0667140930891037, 0.003720339387655258, 0.011145267635583878, 0.1251138597726822, -0.3214971423149109, 0.12434115260839462, 0.17296122014522552, 0.0776529461145401, 0.07980944216251373, 0.08770021796226501, -0.1264542192220688, 0.021706189960241318, 0.1434541642665863, -0.20246772468090057, 0.09045436233282089, -0.0018398147076368332, 0.08581724762916565, 0.077689528465271, -0.008108530193567276, 0.15614911913871765, 0.09629000723361969, -0.08126847445964813, -0.1405404657125473, 0.10876798629760742, -0.23082813620567322, -0.03169606626033783, 0.06276694685220718, -0.09212294220924377, -0.21281999349594116, -0.23641088604927063, 0.1441698670387268, 0.4528616964817047, 0.24949122965335846, -0.11703002452850342, 0.10295727849006653, -0.059663839638233185, -0.1025664433836937, 0.06778093427419662, 0.07582208514213562, -0.050823383033275604, 0.04933667927980423, -0.07353183627128601, 0.05040266737341881, 0.21405594050884247, 0.04783976823091507, 0.006476123817265034, 0.30129730701446533, 0.045308008790016174, -0.004891212098300457, 0.05101458728313446, 0.029195085167884827, -0.12685248255729675, 0.00004230719059705734, -0.07840900868177414, 0.019525889307260513, 0.02286098152399063, 0.00981872994452715, -0.003196318633854389, 0.11317097395658493, -0.18704617023468018, 0.1915326565504074, -0.0376553013920784, -0.09357234835624695, -0.04118608683347702, 0.01813488081097603, -0.13869941234588623, -0.031095881015062332, 0.108583964407444, -0.23656941950321198, 0.11785617470741272, 0.14386972784996033, 0.07910697907209396, 0.189103901386261, 0.08268333971500397, 0.01626722514629364, 0.07942202687263489, -0.004223620519042015, -0.1262291520833969, -0.09041518718004227, 0.08146771788597107, -0.10556290298700333, -0.0015693381428718567, 0.02589036151766777]),
  new Float32Array([-0.07817860692739487, 0.08946237713098526, 0.09285103529691696, -0.024859244003891945, -0.04682295769453049, -0.03206561505794525, -0.05959474667906761, -0.028276590630412102, 0.13365285098552704, -0.06914685666561127, 0.1911955326795578, 0.032665401697158813, -0.10197262465953827, -0.007845771498978138, -0.07231013476848602, 0.0744980052113533, -0.09890688210725784, -0.12773990631103516, -0.07984098047018051, -0.07176564633846283, 0.08381408452987671, 0.04587589576840401, -0.026547018438577652, 0.058713316917419434, -0.1761922687292099, -0.3281325101852417, -0.07458450645208359, -0.074623703956604, 0.1228523850440979, -0.11966802924871445, -0.03578319028019905, -0.026268210262060165, -0.17473649978637695, -0.03506968915462494, 0.0051675718277692795, 0.05226743593811989, -0.03709299862384796, -0.1202234998345375, 0.19865968823432922, 0.10372939705848694, -0.18141286075115204, 0.09190652519464493, 0.022427238523960114, 0.3401273787021637, 0.1976756453514099, 0.02994374930858612, 0.053291626274585724, -0.08975543081760406, 0.18636080622673035, -0.24250829219818115, 0.1508677899837494, 0.13181455433368683, 0.11145099997520447, 0.07285658270120621, 0.12446749210357666, -0.14034248888492584, 0.00034392252564430237, 0.14237311482429504, -0.21904225647449493, 0.1183430552482605, -0.002747446298599243, 0.07679690420627594, 0.010446700267493725, -0.1074175089597702, 0.1124725192785263, 0.10775625705718994, -0.10209395736455917, -0.0940113440155983, 0.140896737575531, -0.1524839848279953, -0.015502666123211384, 0.06358270347118378, -0.07634645700454712, -0.21690870821475983, -0.22563566267490387, 0.12173838168382645, 0.4588821530342102, 0.2604319751262665, -0.1637076586484909, 0.05948295816779137, -0.03326321765780449, -0.09309875965118408, 0.07808534055948257, 0.06627397984266281, -0.12259311974048615, 0.05626688525080681, -0.0258835107088089, 0.07343526184558868, 0.2028391808271408, 0.10107287764549255, -0.053574636578559875, 0.2341894507408142, -0.002438342198729515, 0.013194733299314976, 0.025300731882452965, 0.027970589697360992, -0.1944773942232132, 0.026960061863064766, -0.1475326418876648, -0.08071336150169373, 0.011478743515908718, -0.031793367117643356, 0.03110210783779621, 0.11369085311889648, -0.206858828663826, 0.21467681229114532, 0.014302519150078297, -0.021602705121040344, -0.007394141051918268, 0.0648556500673294, -0.13277140259742737, 0.009511967189610004, 0.12005984038114548, -0.20616666972637177, 0.14369100332260132, 0.13672089576721191, 0.1348785161972046, 0.1498471051454544, 0.1532154083251953, -0.027427220717072487, 0.072541244328022, -0.0350056029856205, -0.15327878296375275, -0.02591761015355587, 0.051096655428409576, -0.060798145830631256, 0.0928187370300293, 0.0378488190472126]),
  new Float32Array([-0.14218023419380188, 0.10265227407217026, 0.036680545657873154, 0.0071393391117453575, -0.0836777538061142, -0.03842056542634964, -0.017563512548804283, -0.017979133874177933, 0.1481022983789444, -0.03777379170060158, 0.16513320803642273, -0.012747236527502537, -0.18050426244735718, -0.07906657457351685, 0.02766226977109909, 0.08782032132148743, -0.15846514701843262, -0.12544527649879456, -0.0738728940486908, -0.13539478182792664, 0.1010422632098198, 0.050563305616378784, 0.05066352337598801, 0.1106584221124649, -0.19523198902606964, -0.4036824107170105, -0.06919030845165253, -0.1169462576508522, 0.13820064067840576, -0.12132418155670166, -0.04052868112921715, -0.04245580732822418, -0.20087188482284546, -0.0942142903804779, 0.038095004856586456, 0.133858785033226, -0.015183272771537304, -0.13942646980285645, 0.2276160567998886, 0.0184025876224041, -0.11773157864809036, 0.05440274626016617, 0.05466197431087494, 0.36075279116630554, 0.14018559455871582, 0.039297282695770264, 0.04988304153084755, -0.01743280701339245, 0.1447852998971939, -0.2561170160770416, 0.14407086372375488, 0.16893582046031952, 0.09558016061782837, 0.057107534259557724, 0.14220263063907623, -0.12759186327457428, 0.015402570366859436, 0.19122810661792755, -0.2640252113342285, 0.10423844307661057, 0.026577625423669815, 0.09430420398712158, 0.04478975012898445, -0.07520831376314163, 0.21010689437389374, 0.11203988641500473, -0.14259476959705353, -0.05996350571513176, 0.04097028449177742, -0.17267608642578125, 0.032645534723997116, 0.05487405136227608, -0.10185553133487701, -0.22024616599082947, -0.23942461609840393, 0.13836626708507538, 0.5190958380699158, 0.24052585661411285, -0.16502220928668976, 0.0006986185908317566, -0.06735031306743622, -0.10423548519611359, 0.11702573299407959, 0.06345077604055405, -0.11843845248222351, 0.021341025829315186, -0.09007032960653305, 0.14600710570812225, 0.168390154838562, 0.10288278013467789, -0.04520894214510918, 0.2530185580253601, 0.05100899934768677, 0.015422429889440536, 0.010354750789701939, 0.034527771174907684, -0.20058095455169678, -0.00226402934640646, -0.09510229527950287, -0.009968161582946777, 0.014917658641934395, -0.06585705280303955, 0.032348912209272385, 0.09745955467224121, -0.19188499450683594, 0.13205550611019135, 0.019430791959166527, -0.062104273587465286, -0.04386346414685249, 0.0636160671710968, -0.17907893657684326, -0.03477612882852554, 0.10023284703493118, -0.28926751017570496, 0.13485684990882874, 0.1873011291027069, 0.04377703368663788, 0.19860048592090607, 0.05823105201125145, 0.008532408624887466, 0.07199683040380478, -0.026954561471939087, -0.1010233461856842, -0.02615157701075077, 0.050393491983413696, -0.040040165185928345, 0.10833986103534698, 0.016150182113051414]),
  new Float32Array([-0.13746555149555206, 0.09021811187267303, 0.10103370994329453, -0.003262970596551895, -0.059564899653196335, -0.04442916437983513, -0.052358828485012054, -0.011186209507286549, 0.13188445568084717, -0.07907778769731522, 0.19608889520168304, -0.01621193066239357, -0.14678332209587097, 0.023935921490192413, -0.098316989839077, 0.06968836486339569, -0.08876172453165054, -0.10585545003414154, -0.05933471769094467, -0.0815528854727745, 0.14218372106552124, 0.07685603201389313, -0.049366097897291183, 0.07602450996637344, -0.15150132775306702, -0.3139283359050751, -0.06840025633573532, -0.09485951066017151, 0.08986310660839081, -0.10453206300735474, -0.06045667082071304, -0.006629478186368942, -0.14494280517101288, -0.021826473996043205, -0.035569928586483, 0.05266338959336281, 0.01095648854970932, -0.11526647210121155, 0.19521106779575348, 0.06784836947917938, -0.19119581580162048, 0.05579070746898651, 0.0017422828823328018, 0.3397741913795471, 0.15697893500328064, 0.0034327488392591476, 0.05260190740227699, -0.08706305921077728, 0.18506518006324768, -0.23041795194149017, 0.1148456558585167, 0.1751759946346283, 0.07925832271575928, 0.06241753697395325, 0.06986941397190094, -0.1491878181695938, -0.0022704117000102997, 0.14357051253318787, -0.17525386810302734, 0.11167626082897186, 0.03262317180633545, 0.017602115869522095, 0.01843174919486046, -0.10644131153821945, 0.13293097913265228, 0.10869195312261581, -0.10381289571523666, -0.11248942464590073, 0.10922981798648834, -0.16046805679798126, -0.04184820502996445, 0.04954494535923004, -0.14192092418670654, -0.1974000632762909, -0.2656165659427643, 0.15462839603424072, 0.4712967574596405, 0.21142403781414032, -0.13904577493667603, 0.09437421709299088, -0.04734634608030319, -0.04969707876443863, 0.12043509632349014, 0.11906597018241882, -0.11968784034252167, 0.06032928079366684, -0.06931782513856888, 0.08073888719081879, 0.20274774730205536, 0.0688210278749466, -0.05881427600979805, 0.20649567246437073, -0.00031916238367557526, 0.032725002616643906, 0.034546609967947006, 0.04807133600115776, -0.17877164483070374, 0.001436036080121994, -0.10248330235481262, -0.015891075134277344, 0.03142203018069267, -0.04866957291960716, 0.008972329087555408, 0.1247425228357315, -0.17926771938800812, 0.15862742066383362, -0.015822958201169968, -0.0036072712391614914, -0.015874333679676056, 0.03388142213225365, -0.11539626866579056, -0.0035439757630228996, 0.11185095459222794, -0.14897730946540833, 0.11993564665317535, 0.10876016318798065, 0.13326917588710785, 0.17345532774925232, 0.1587105691432953, 0.02031928300857544, 0.04066889360547066, 0.00007597357034683228, -0.16833500564098358, -0.006254112347960472, 0.09364014118909836, -0.013978546485304832, 0.07882922142744064, 0.02391721121966839]),
  new Float32Array([-0.09167864173650742, 0.06635178625583649, 0.05800088495016098, -0.03394952416419983, -0.04670900106430054, 0.0056662727147340775, -0.015576479956507683, -0.022816576063632965, 0.15782615542411804, -0.07410046458244324, 0.18060465157032013, 0.041103608906269073, -0.1638704389333725, -0.0334983766078949, -0.06229822337627411, 0.06898228079080582, -0.12322159856557846, -0.1303352564573288, -0.07944968342781067, -0.10799647867679596, 0.11309598386287689, 0.05463012680411339, -0.014373567886650562, 0.06592732667922974, -0.19624511897563934, -0.3250611126422882, -0.08433225750923157, -0.07082499563694, 0.09131910651922226, -0.12479066848754883, -0.03899192437529564, 0.008684555999934673, -0.18160802125930786, -0.0530911348760128, -0.002120787277817726, 0.054709773510694504, 0.016615934669971466, -0.11908784508705139, 0.21865533292293549, 0.09150491654872894, -0.11940844357013702, 0.06740569323301315, 0.04682796075940132, 0.35614803433418274, 0.18939422070980072, 0.003848263993859291, 0.042705900967121124, -0.024501623585820198, 0.17225445806980133, -0.2722610831260681, 0.14533160626888275, 0.14112906157970428, 0.10790158808231354, 0.0770871490240097, 0.10430672764778137, -0.1294003129005432, -0.016522333025932312, 0.15748688578605652, -0.2314535677433014, 0.14360502362251282, 0.000139554962515831, 0.030545637011528015, 0.034618083387613297, -0.07260086387395859, 0.13408461213111877, 0.10479767620563507, -0.12035822123289108, -0.09161600470542908, 0.1113603413105011, -0.15473464131355286, 0.011627377942204475, 0.036369215697050095, -0.11258329451084137, -0.2091352343559265, -0.21320335566997528, 0.15485064685344696, 0.5261971950531006, 0.26387080550193787, -0.15860019624233246, 0.05621449649333954, -0.07406565546989441, -0.12541578710079193, 0.10346551984548569, 0.065824493765831, -0.0798654854297638, 0.0379873663187027, -0.05576280876994133, 0.12940001487731934, 0.20768137276172638, 0.11483132839202881, -0.0818791463971138, 0.2709405720233917, 0.020938441157341003, 0.011548968032002449, 0.04088253527879715, 0.04430676996707916, -0.17686152458190918, 0.017914237454533577, -0.1259171962738037, -0.018657080829143524, -0.036867618560791016, -0.05798475816845894, 0.04235794395208359, 0.10258042812347412, -0.13910876214504242, 0.180324524641037, 0.008703739382326603, -0.023511674255132675, -0.05139503255486488, 0.0531374029815197, -0.15926583111286163, -0.01535821333527565, 0.09892964363098145, -0.23255176842212677, 0.10100315511226654, 0.12183258682489395, 0.0991923063993454, 0.18263351917266846, 0.09568093717098236, 0.01883780024945736, 0.10126586258411407, -0.02179735153913498, -0.10878929495811462, -0.02743978425860405, 0.05207197740674019, -0.028478488326072693, 0.12706540524959564, 0.044329188764095306]),
  new Float32Array([-0.17242322862148285, 0.1047651469707489, 0.09268859028816223, 0.02828347682952881, -0.026891741901636124, -0.0337354950606823, 0.014329750090837479, -0.003903076983988285, 0.2042885422706604, -0.0657210722565651, 0.21791420876979828, 0.04278288409113884, -0.176777184009552, -0.053144484758377075, -0.018982382491230965, 0.088458351790905, -0.09417562186717987, -0.08549558371305466, -0.10317336022853851, -0.14107300341129303, 0.11891384422779083, 0.06930726021528244, -0.0025929203256964684, 0.01988377794623375, -0.229105144739151, -0.3339316248893738, -0.08306575566530228, -0.1190425232052803, 0.07256901264190674, -0.1471392810344696, -0.04813583567738533, -0.03687432408332825, -0.18236753344535828, -0.09351460635662079, 0.006165044382214546, 0.08083076030015945, -0.019546210765838623, -0.06298652291297913, 0.20074120163917542, 0.06577858328819275, -0.13741238415241241, 0.047658368945121765, 0.059188999235630035, 0.3723381757736206, 0.20023055374622345, 0.024688487872481346, 0.016639893874526024, -0.03513575345277786, 0.1632421910762787, -0.26650506258010864, 0.09377150237560272, 0.12523117661476135, 0.10369279235601425, 0.09422864019870758, 0.16139650344848633, -0.1395472139120102, -0.004709433764219284, 0.14658699929714203, -0.2451855093240738, 0.09657395631074905, 0.03809461370110512, 0.04004316031932831, -0.03931443765759468, -0.053438715636730194, 0.1244693174958229, 0.09242679923772812, -0.13247358798980713, -0.10911062359809875, 0.08765905350446701, -0.18421712517738342, 0.04341071844100952, 0.09770740568637848, -0.11643759906291962, -0.25037604570388794, -0.264244943857193, 0.17580130696296692, 0.5053123235702515, 0.2342086285352707, -0.1306876540184021, 0.013813767582178116, -0.033777009695768356, -0.08802202343940735, 0.09461694210767746, 0.04422955960035324, -0.09502233564853668, 0.03727256506681442, -0.04978504776954651, 0.12442103773355484, 0.1576164811849594, 0.08921778202056885, -0.028278104960918427, 0.22384251654148102, 0.00660344585776329, -0.004460291936993599, -0.01814154163002968, 0.047034308314323425, -0.1983472853899002, 0.017396174371242523, -0.11877410113811493, -0.010556342080235481, 0.009775004349648952, -0.08229444175958633, 0.04378237575292587, 0.10190308094024658, -0.1960734874010086, 0.1674024909734726, -0.004969676956534386, -0.05167248472571373, -0.07157120853662491, 0.03128402680158615, -0.15429145097732544, 0.028184864670038223, 0.1053612008690834, -0.2528056502342224, 0.1374751180410385, 0.19131731986999512, 0.030405543744564056, 0.15903382003307343, 0.07289737462997437, -0.008875248953700066, 0.058105770498514175, 0.03818213939666748, -0.14598947763442993, -0.03422478213906288, 0.016255393624305725, -0.06969311088323593, 0.07516587525606155, -0.015299880877137184]),
]

const serban_face = [
  new Float32Array([-0.15678825974464417, 0.04546475037932396, -0.058360710740089417, 0.0006206575781106949, -0.0673113465309143, -0.06689968705177307, 0.006966793909668922, -0.1827343851327896, 0.16019494831562042, -0.11016634106636047, 0.23679962754249573, 0.07221975922584534, -0.2025337815284729, -0.04955374449491501, -0.003098823130130768, 0.03942573815584183, -0.2227790802717209, -0.14445878565311432, -0.02159438654780388, -0.004962438717484474, 0.06592624634504318, -0.023146040737628937, 0.0725378692150116, 0.09559463709592819, -0.13985797762870789, -0.3451942503452301, -0.17266753315925598, -0.18197275698184967, 0.051162272691726685, -0.05696771293878555, 0.04241601377725601, 0.007846853695809841, -0.15048088133335114, -0.005669252946972847, -0.014140385203063488, 0.01266181655228138, -0.016427606344223022, 0.015075687319040298, 0.25717464089393616, -0.011176337487995625, -0.19841106235980988, -0.05445414409041405, -0.01501756627112627, 0.30861788988113403, 0.1804381012916565, 0.04429994896054268, 0.04654417559504509, -0.07033489644527435, 0.10243122279644012, -0.236083522439003, 0.07097022235393524, 0.1645723432302475, 0.16752667725086212, 0.0450955294072628, 0.03640369325876236, -0.14359313249588013, 0.04075507074594498, 0.07532083243131638, -0.2745615541934967, 0.056671567261219025, 0.05629345029592514, -0.03453424945473671, 0.05218321830034256, 0.012781007215380669, 0.24883674085140228, 0.1001739576458931, -0.18473249673843384, -0.0731586217880249, 0.09449631720781326, -0.23022979497909546, -0.025974959135055542, 0.10127132385969162, -0.16183553636074066, -0.308869332075119, -0.3146759569644928, 0.030009552836418152, 0.4743517339229584, 0.20204317569732666, -0.07987502217292786, 0.01501074805855751, -0.12256019562482834, -0.070426806807518, 0.06173919513821602, 0.09411365538835526, -0.10614559054374695, 0.00022869836539030075, -0.1274365931749344, 0.09728390723466873, 0.13550369441509247, -0.008618677966296673, -0.07262551039457321, 0.20317189395427704, -0.03842119872570038, 0.05895232781767845, -0.0031135790050029755, 0.15267673134803772, -0.10327745229005814, 0.012894381769001484, -0.037860460579395294, 0.061793968081474304, -0.04075036570429802, 0.0028418032452464104, 0.055697984993457794, 0.10835912823677063, -0.12134560197591782, 0.18215981125831604, -0.04638458788394928, -0.034353550523519516, -0.097921222448349, -0.034506577998399734, -0.10192371159791946, -0.035887815058231354, 0.08245601505041122, -0.3071129322052002, 0.18211378157138824, 0.16254983842372894, -0.02874377928674221, 0.19887156784534454, -0.032296959310770035, 0.008065734058618546, -0.0784754753112793, -0.05298788100481033, -0.2046409547328949, -0.019028600305318832, 0.05525870993733406, -0.038752201944589615, 0.11882837861776352, -0.029159361496567726, ]),
  new Float32Array([-0.15005655586719513, 0.03168110176920891, -0.025503024458885193, -0.00528629869222641, -0.11212898045778275, -0.061566051095724106, 0.004404306411743164, -0.12213759124279022, 0.17836081981658936, -0.07550135254859924, 0.21588590741157532, 0.06647463887929916, -0.23183441162109375, -0.06192807853221893, 0.012393010780215263, 0.0873587355017662, -0.20954427123069763, -0.10910885035991669, -0.005459839012473822, -0.011449749581515789, 0.06348364055156708, -0.0004047011025249958, 0.08762265741825104, 0.09857115894556046, -0.14538484811782837, -0.3457079827785492, -0.15515179932117462, -0.1917724758386612, 0.03164825960993767, -0.0701402798295021, 0.05061887204647064, 0.024822412058711052, -0.1277114450931549, -0.012715207412838936, 0.000941254198551178, -0.024725910276174545, -0.045477379113435745, 0.01182747446000576, 0.2596721053123474, -0.0016397926956415176, -0.21715767681598663, -0.06856921315193176, -0.011452201753854752, 0.30677640438079834, 0.19566932320594788, 0.06806837022304535, 0.048241257667541504, -0.06592008471488953, 0.1042976975440979, -0.26277172565460205, 0.0789516270160675, 0.16088075935840607, 0.09478408843278885, 0.03181914985179901, 0.047956667840480804, -0.12093713134527206, 0.06882006675004959, 0.07619697600603104, -0.3280565142631531, 0.07190674543380737, 0.07039174437522888, -0.08080834150314331, 0.0326196514070034, 0.04778961092233658, 0.267164409160614, 0.11082805693149567, -0.159807950258255, -0.10409766435623169, 0.1273716241121292, -0.24089229106903076, -0.047112636268138885, 0.0981045812368393, -0.15497668087482452, -0.28071996569633484, -0.34434929490089417, 0.007508906535804272, 0.47631481289863586, 0.1840876340866089, -0.08414383232593536, 0.03896196931600571, -0.11011065542697906, -0.06634989380836487, 0.0794023722410202, 0.11272377520799637, -0.09263966977596283, -0.03849602863192558, -0.12256354093551636, 0.07257980108261108, 0.13286042213439941, -0.031273581087589264, -0.05882301926612854, 0.23611582815647125, 0.0063501037657260895, 0.025326184928417206, 0.017628904432058334, 0.14171265065670013, -0.09726859629154205, -0.0036348458379507065, -0.04728202149271965, 0.028564125299453735, -0.001679224893450737, -0.008197693154215813, 0.08147043734788895, 0.1058313325047493, -0.15408454835414886, 0.20169277489185333, -0.03926714137196541, -0.04412767291069031, -0.09333037585020065, -0.04626018926501274, -0.11298287659883499, -0.0246833898127079, 0.09234149008989334, -0.2955062985420227, 0.21722197532653809, 0.1424015462398529, 0.007094831671565771, 0.18516694009304047, -0.03749748691916466, 0.012833252549171448, -0.07898669689893723, -0.06974269449710846, -0.16686008870601654, -0.019888486713171005, 0.057145196944475174, -0.042370155453681946, 0.1341165006160736, 0.004775225184857845, ]),
  new Float32Array([-0.16251981258392334, 0.06776831299066544, -0.03789721429347992, 0.01556025817990303, -0.07248111069202423, -0.08239693939685822, -0.02043965831398964, -0.11281644552946091, 0.13940761983394623, -0.055982813239097595, 0.22355729341506958, 0.011456258594989777, -0.19921869039535522, -0.11156509816646576, 0.006551483646035194, 0.07936714589595795, -0.2429552525281906, -0.0766461044549942, -0.00371402595192194, 0.0018779179081320763, 0.10711230337619781, -0.022843465209007263, 0.07087109237909317, 0.12220229208469391, -0.1698230355978012, -0.3415975272655487, -0.16116733849048615, -0.20020195841789246, 0.08184022456407547, -0.025532769039273262, -0.0013260198757052422, 0.015416493639349937, -0.12230980396270752, -0.062443509697914124, 0.008909422904253006, 0.030387695878744125, -0.014812814071774483, 0.012625640258193016, 0.19622617959976196, -0.033536575734615326, -0.19069744646549225, -0.02984161302447319, -0.007500532083213329, 0.2843882143497467, 0.18908213078975677, 0.08158282935619354, 0.07317934930324554, -0.06840044260025024, 0.1303952932357788, -0.2517651319503784, 0.06712420284748077, 0.1713401824235916, 0.12807944416999817, 0.06237378716468811, 0.04528707265853882, -0.12290995568037033, 0.06813917309045792, 0.07468420267105103, -0.3374564051628113, 0.05152858793735504, 0.05886872857809067, -0.006680247373878956, 0.05041022598743439, 0.041412848979234695, 0.20981305837631226, 0.12584923207759857, -0.16321469843387604, -0.1336800903081894, 0.13693642616271973, -0.2643676996231079, -0.01658592000603676, 0.11713108420372009, -0.13133734464645386, -0.2909756898880005, -0.333377867937088, 0.04305534064769745, 0.47013983130455017, 0.22026728093624115, -0.09456279873847961, 0.029311036691069603, -0.10867240279912949, -0.08195395767688751, 0.08271191269159317, 0.09560010582208633, -0.08238713443279266, -0.008318455889821053, -0.13577990233898163, 0.05198914185166359, 0.12040000408887863, -0.038163602352142334, -0.039584867656230927, 0.22789664566516876, 0.043100133538246155, 0.04569292441010475, 0.039721548557281494, 0.1452268362045288, -0.12578101456165314, 0.011962649412453175, -0.05870378762483597, 0.055883873254060745, -0.012697912752628326, -0.013163289986550808, 0.048911310732364655, 0.07168324291706085, -0.09435701370239258, 0.21538445353507996, -0.03740914911031723, -0.04530789330601692, -0.12930996716022491, -0.04079817607998848, -0.1307884007692337, -0.023259907960891724, 0.09623536467552185, -0.2757379412651062, 0.18438513576984406, 0.14497067034244537, 0.021357310935854912, 0.19446945190429688, 0.0005603439640253782, 0.030492234975099564, -0.04958121478557587, -0.07249543070793152, -0.14041531085968018, -0.05313641205430031, 0.058759067207574844, -0.07557260990142822, 0.09112593531608582, -0.030559800565242767, ]),
  new Float32Array([-0.14157885313034058, 0.047633349895477295, -0.021930813789367676, 0.022231480106711388, -0.030958052724599838, -0.09288280457258224, -0.01959913596510887, -0.12267405539751053, 0.13355286419391632, -0.05800630524754524, 0.21834158897399902, 0.0007920386269688606, -0.2065088152885437, -0.09992808103561401, 0.025854259729385376, 0.04776149243116379, -0.20874759554862976, -0.0921577587723732, -0.020924484357237816, -0.013122017495334148, 0.1417410522699356, -0.06404005736112595, 0.0639277994632721, 0.1203070729970932, -0.18411219120025635, -0.32337549328804016, -0.1708430051803589, -0.17638427019119263, 0.11812149733304977, -0.038242507725954056, 0.003041928168386221, -0.05599908158183098, -0.14022552967071533, -0.02971588633954525, -0.0025986414402723312, 0.02530098520219326, -0.01802169531583786, -0.030938616022467613, 0.20435979962348938, -0.045280974358320236, -0.1773667186498642, -0.03697378560900688, -0.03621095046401024, 0.2461351752281189, 0.1751134693622589, 0.09070957452058792, 0.05234212055802345, -0.07182151079177856, 0.11728610843420029, -0.2486552894115448, 0.08415527641773224, 0.20347771048545837, 0.13825103640556335, 0.06159529834985733, 0.07350538671016693, -0.1350366771221161, 0.06166713684797287, 0.1072426363825798, -0.3469856083393097, 0.055189523845911026, 0.01868976093828678, 0.026937436312437057, 0.03127866983413696, 0.0024034795351326466, 0.20293352007865906, 0.14967726171016693, -0.2077583372592926, -0.11289961636066437, 0.1255808025598526, -0.2644350826740265, -0.004682650789618492, 0.07145470380783081, -0.12435197830200195, -0.29121071100234985, -0.3450510799884796, 0.0369168259203434, 0.43953707814216614, 0.21363770961761475, -0.14972838759422302, 0.030686000362038612, -0.10970582067966461, -0.059621963649988174, 0.07088758796453476, 0.08975943177938461, -0.11009576171636581, 0.00458929780870676, -0.12814998626708984, 0.026487071067094803, 0.07239468395709991, -0.023815428838133812, -0.027021989226341248, 0.22526736557483673, 0.007011755369603634, 0.04485723003745079, 0.02086521126329899, 0.14196297526359558, -0.16286063194274902, -0.0139137152582407, -0.03929392620921135, 0.0394810289144516, -0.004790901206433773, -0.00332683976739645, 0.04736591503024101, 0.09289346635341644, -0.10997719317674637, 0.2140866219997406, -0.02224542386829853, -0.052576277405023575, -0.10296249389648438, -0.02470230869948864, -0.1463070511817932, -0.04764232039451599, 0.07684756815433502, -0.3085111975669861, 0.17759747803211212, 0.1649336814880371, 0.009279309771955013, 0.18110311031341553, 0.011871677823364735, 0.036672450602054596, -0.036577947437763214, -0.030756762251257896, -0.1537909209728241, -0.04391763359308243, 0.019249333068728447, -0.07834448665380478, 0.05203649029135704, -0.03166112303733826, ]),
  new Float32Array([-0.1549241542816162, 0.049894578754901886, -0.06272520869970322, -0.012893307954072952, -0.014293119311332703, -0.02305552363395691, -0.03516591712832451, -0.12385362386703491, 0.19110018014907837, -0.11994780600070953, 0.20883916318416595, -0.015155185014009476, -0.22691018879413605, -0.1150612011551857, -0.0332651287317276, 0.11171342432498932, -0.1589435338973999, -0.11570064723491669, -0.08036603033542633, -0.04576224833726883, 0.05998536944389343, -0.058340396732091904, 0.0389065220952034, 0.09252950549125671, -0.19179822504520416, -0.33891162276268005, -0.14659608900547028, -0.1081371158361435, 0.01536167599260807, -0.051005769520998, 0.04076652601361275, 0.0025199363008141518, -0.1641109436750412, -0.028125010430812836, -0.01897600293159485, 0.08010434359312057, -0.00856697279959917, 0.02167283184826374, 0.23002387583255768, -0.02825254388153553, -0.1944051831960678, -0.045779433101415634, 0.046605780720710754, 0.25504744052886963, 0.1299287974834442, 0.06577426195144653, 0.021678458899259567, -0.044152967631816864, 0.13054144382476807, -0.2238067388534546, 0.09438006579875946, 0.14851145446300507, 0.14140234887599945, 0.04419892281293869, 0.08009511232376099, -0.14510372281074524, 0.03513441979885101, 0.13795386254787445, -0.268557608127594, 0.023663748055696487, 0.004611188545823097, 0.006960415281355381, -0.034333743155002594, 0.03555424511432648, 0.21065391600131989, 0.17701444029808044, -0.15309225022792816, -0.15852142870426178, 0.2083064615726471, -0.20454558730125427, 0.04394915699958801, 0.08083954453468323, -0.09446503967046738, -0.25348296761512756, -0.3439510762691498, 0.04455658048391342, 0.42878562211990356, 0.11761611700057983, -0.0883834958076477, 0.05811367556452751, -0.06376755237579346, -0.08019600808620453, 0.04924003779888153, 0.033266808837652206, -0.13324680924415588, 0.015706099569797516, -0.07928385585546494, 0.04834704101085663, 0.14313450455665588, 0.033690281212329865, -0.04675956070423126, 0.18820062279701233, 0.008108962327241898, 0.015220795758068562, 0.044477857649326324, 0.09671924263238907, -0.11649730801582336, 0.01260368898510933, -0.09285964071750641, 0.07822063565254211, 0.032732460647821426, -0.051769793033599854, 0.040870968252420425, 0.044161148369312286, -0.13671459257602692, 0.18304979801177979, 0.015269665978848934, -0.03126047924160957, -0.06093623861670494, 0.058794379234313965, -0.2050980031490326, -0.04297693818807602, 0.1397034078836441, -0.30609244108200073, 0.18489809334278107, 0.11457530409097672, 0.021076781675219536, 0.16589419543743134, 0.0916416347026825, 0.056232377886772156, 0.014432009309530258, -0.007119227200746536, -0.17121176421642303, -0.056750088930130005, 0.04580873250961304, -0.10565203428268433, 0.08284537494182587, 0.032732654362916946, ]),
  new Float32Array([-0.1383756697177887, 0.10168556869029999, -0.026103604584932327, 0.004996627569198608, -0.08200868219137192, -0.020771950483322144, -0.06283542513847351, -0.09111932665109634, 0.1284293234348297, -0.05461784452199936, 0.24586810171604156, -0.04659999534487724, -0.21911032497882843, 0.004183243028819561, -0.04118749126791954, 0.10475881397724152, -0.23837246000766754, -0.1108592301607132, -0.09173356741666794, -0.06292576342821121, 0.05546770989894867, 0.04164578393101692, -0.001358061796054244, 0.05838674679398537, -0.10370725393295288, -0.36508500576019287, -0.11417900025844574, -0.17300236225128174, 0.11882514506578445, -0.09500763565301895, 0.02554319240152836, -0.02273588255047798, -0.05689827352762222, 0.024140777066349983, 0.04957108944654465, -0.012923677451908588, -0.025558456778526306, -0.003983359318226576, 0.2539738416671753, 0.02698877826333046, -0.18865932524204254, -0.007832065224647522, 0.03672809153795242, 0.3435571491718292, 0.18668074905872345, 0.07819526642560959, -0.0012606419622898102, -0.12126553803682327, 0.13560090959072113, -0.21037164330482483, 0.06262943148612976, 0.2176242172718048, 0.09804794192314148, 0.10732558369636536, 0.13131602108478546, -0.11885858327150345, 0.015450462698936462, 0.0935698002576828, -0.21497535705566406, 0.07295484095811844, 0.04688282310962677, -0.013757102191448212, -0.0028926339000463486, -0.08140872418880463, 0.2060682773590088, 0.07651060074567795, -0.13056141138076782, -0.13282296061515808, 0.1741606891155243, -0.16430410742759705, -0.10596173256635666, 0.09550289809703827, -0.13417576253414154, -0.22612908482551575, -0.2718198299407959, 0.006318619474768639, 0.4496263563632965, 0.16978386044502258, -0.16867798566818237, 0.019588282331824303, -0.011615597642958164, -0.12382135540246964, 0.10428740084171295, 0.09758011996746063, -0.11224007606506348, -0.04039730131626129, -0.08189272880554199, 0.0442705899477005, 0.158132866024971, -0.03111323155462742, -0.01277812197804451, 0.18549862504005432, -0.013776028528809547, 0.03979877382516861, 0.03804902359843254, 0.11571482568979263, -0.14106377959251404, -0.020477909594774246, -0.12812736630439758, -0.07325088977813721, 0.05090975761413574, -0.015253000892698765, 0.03179721534252167, 0.08286207914352417, -0.13382521271705627, 0.20433954894542694, 0.028385449200868607, -0.03251020237803459, -0.07265490293502808, 0.014877356588840485, -0.053620755672454834, 0.03530910983681679, 0.18525543808937073, -0.2364773005247116, 0.22240769863128662, 0.14885737001895905, 0.07138767838478088, 0.12555526196956635, 0.010756115429103374, 0.004303380846977234, -0.0720769390463829, -0.049768030643463135, -0.194082573056221, -0.06739971041679382, -0.004445310682058334, -0.021536152809858322, 0.014462418854236603, -0.007307670544832945, ]),
  new Float32Array([-0.19878216087818146, 0.0334998182952404, -0.0157940611243248, -0.010103683918714523, -0.07702700793743134, -0.06269586086273193, -0.021359825506806374, -0.14851079881191254, 0.10812221467494965, -0.13513565063476562, 0.2020377665758133, 0.0092293880879879, -0.25355270504951477, -0.017581449821591377, -0.0011041965335607529, 0.12130993604660034, -0.25294461846351624, -0.13365602493286133, -0.04001243785023689, -0.028322475031018257, 0.08379261940717697, -0.009599323384463787, -0.0032062113750725985, 0.12222900986671448, -0.17307810485363007, -0.38141849637031555, -0.14526697993278503, -0.12847532331943512, 0.030145786702632904, 0.0006741362158209085, 0.025753259658813477, -0.005413091275840998, -0.12250664830207825, 0.028385892510414124, 0.03489747643470764, 0.09277285635471344, -0.015835313126444817, 0.01667536050081253, 0.22985780239105225, -0.002968423068523407, -0.21724441647529602, 0.007181532680988312, 0.03564208000898361, 0.2853066921234131, 0.15768539905548096, 0.08232194185256958, 0.03791316971182823, -0.07753492146730423, 0.09283657371997833, -0.24587731063365936, 0.1080499216914177, 0.1821812391281128, 0.10865737497806549, 0.09987476468086243, 0.044675152748823166, -0.17873144149780273, 0.04462824761867523, 0.13448429107666016, -0.2819221317768097, 0.06494899839162827, 0.06912557035684586, -0.078791543841362, 0.05194787308573723, 0.026704352349042892, 0.2472425252199173, 0.12786555290222168, -0.19661760330200195, -0.12123565375804901, 0.1725221574306488, -0.24029241502285004, -0.05827200785279274, 0.01665615104138851, -0.12293455004692078, -0.258402556180954, -0.32666048407554626, 0.056880004703998566, 0.44289296865463257, 0.227290540933609, -0.15448381006717682, 0.0396561399102211, -0.08456841111183167, -0.06888528168201447, 0.12632542848587036, 0.13567134737968445, -0.05174122005701065, -0.036618221551179886, -0.1018512174487114, 0.03506933152675629, 0.13150686025619507, 0.04602979123592377, -0.023707900196313858, 0.2614152431488037, 0.03229686617851257, 0.045503273606300354, 0.0544629730284214, 0.10964813828468323, -0.16230276226997375, -0.03560961037874222, -0.08743666857481003, -0.005196800455451012, -0.048521481454372406, 0.00429312139749527, 0.06002169847488403, 0.11329695582389832, -0.12821267545223236, 0.2516534924507141, -0.03225129842758179, -0.018236171454191208, -0.07579931616783142, 0.0475369393825531, -0.11297987401485443, -0.05146881192922592, 0.09387805312871933, -0.2866423428058624, 0.20986436307430267, 0.1770075112581253, 0.03978670760989189, 0.20110012590885162, 0.05125182121992111, 0.03268672525882721, -0.024561647325754166, -0.03852963447570801, -0.22879397869110107, -0.03199702873826027, 0.05356695130467415, -0.07526866346597672, 0.10617294907569885, 0.03256389498710632, ]),
  new Float32Array([-0.1758318990468979, -0.005313245579600334, -0.0061614615842700005, -0.031125271692872047, -0.06522538512945175, -0.10513351857662201, -0.029245151206851006, -0.1431959867477417, 0.10438032448291779, -0.09945788234472275, 0.2310805767774582, -0.02417248860001564, -0.19624492526054382, -0.04018536955118179, 0.010585924610495567, 0.057242028415203094, -0.24504080414772034, -0.10953565686941147, -0.00928245484828949, -0.006664765067398548, 0.08397355675697327, -0.0315280444920063, 0.012903573922812939, 0.1349140703678131, -0.17305554449558258, -0.33631810545921326, -0.17882061004638672, -0.16253232955932617, 0.0429009385406971, -0.026553979143500328, 0.03216429427266121, 0.020187057554721832, -0.12306667864322662, 0.004950322210788727, 0.03218603879213333, 0.04812084138393402, -0.00905713438987732, 0.003409517463296652, 0.22193802893161774, -0.04516862332820892, -0.20832230150699615, -0.011524803005158901, 0.02075556106865406, 0.2814332842826843, 0.17940527200698853, 0.07248090207576752, 0.015817511826753616, -0.06653006374835968, 0.13024209439754486, -0.24372316896915436, 0.0665048286318779, 0.20010623335838318, 0.12337266653776169, 0.09010212123394012, 0.05800909921526909, -0.12646400928497314, 0.06501218676567078, 0.09040272235870361, -0.30471381545066833, 0.04533322900533676, 0.04745480418205261, -0.06072625517845154, 0.06747229397296906, -0.017205648124217987, 0.21331878006458282, 0.12787996232509613, -0.20103515684604645, -0.12816248834133148, 0.12731049954891205, -0.2503706216812134, -0.0543602854013443, 0.09142794460058212, -0.1521672159433365, -0.2673417925834656, -0.344203919172287, 0.026895124465227127, 0.41469526290893555, 0.2063644677400589, -0.13718387484550476, 0.032848060131073, -0.09241142123937607, -0.06282708793878555, 0.08323292434215546, 0.1100405752658844, -0.05694718286395073, -0.018133824691176414, -0.09901919960975647, 0.04103683680295944, 0.11752136796712875, -0.007523476146161556, -0.031124485656619072, 0.21036098897457123, 0.002791590988636017, 0.04226439446210861, 0.035205963999032974, 0.14947830140590668, -0.13428537547588348, -0.026424536481499672, -0.06475652754306793, 0.062192343175411224, -0.042054418474435806, 0.022135701030492783, 0.053057193756103516, 0.11536341905593872, -0.12064258754253387, 0.23909954726696014, -0.03405529633164406, -0.05038406699895859, -0.12261264771223068, -0.0001378231681883335, -0.0907089039683342, -0.02764274924993515, 0.06976994127035141, -0.327254056930542, 0.19470854103565216, 0.1513429880142212, 0.020052066072821617, 0.18513108789920807, -0.029517924413084984, 0.014116549864411354, -0.08349355310201645, -0.04110344499349594, -0.16507287323474884, -0.055937159806489944, 0.03434906154870987, -0.03866356238722801, 0.08229117095470428, -0.019421720877289772, ]),
  new Float32Array([-0.15970490872859955, 0.03995136171579361, 0.000746491365134716, -0.025489551946520805, -0.1437530517578125, -0.03951685130596161, -0.02441144362092018, -0.044315848499536514, 0.1545262485742569, -0.0668385773897171, 0.2422943413257599, -0.0022445861250162125, -0.22214294970035553, -0.04862698167562485, -0.034992143511772156, 0.08457411825656891, -0.13863340020179749, -0.11595115065574646, -0.04010768607258797, 0.011761700734496117, 0.09571243822574615, 0.06310570985078812, 0.026436055079102516, 0.09322751313447952, -0.13909560441970825, -0.35110965371131897, -0.14337310194969177, -0.08860927820205688, 0.04847666248679161, -0.07142321765422821, 0.07519033551216125, 0.03699781745672226, -0.16859465837478638, -0.03554297983646393, 0.012411307543516159, 0.0600479319691658, -0.08197519183158875, -0.0014162426814436913, 0.2313161939382553, -0.02815886214375496, -0.23967355489730835, -0.02065277099609375, 0.027836406603455544, 0.335756778717041, 0.14557255804538727, 0.10183662921190262, 0.04589112102985382, -0.048686616122722626, 0.07011003792285919, -0.3006513714790344, 0.09605829417705536, 0.22646579146385193, 0.08594242483377457, 0.04016847163438797, 0.04648275300860405, -0.08409720659255981, 0.04264736920595169, 0.16539280116558075, -0.31590765714645386, 0.04595319926738739, 0.06372629106044769, 0.011031359434127808, -0.02243109792470932, -0.044527776539325714, 0.2136206030845642, 0.10561460256576538, -0.1778448224067688, -0.1497218757867813, 0.12790440022945404, -0.26939165592193604, -0.04256471246480942, 0.19810867309570312, -0.12850844860076904, -0.28511011600494385, -0.32407841086387634, 0.03963707387447357, 0.42315319180488586, 0.15560822188854218, -0.0694713294506073, 0.04074031859636307, -0.018796810880303383, -0.03712964057922363, 0.034811265766620636, 0.05921296775341034, -0.08935040235519409, 0.012726444751024246, -0.12376503646373749, 0.08730640262365341, 0.15754495561122894, -0.0015887054614722729, -0.022972077131271362, 0.25668466091156006, 0.0817376971244812, -0.04907781630754471, 0.028949234634637833, 0.1824272722005844, -0.03704315796494484, -0.05525745451450348, -0.0854659155011177, 0.04624371975660324, 0.06587399542331696, -0.0011262213811278343, 0.00595686212182045, 0.08418978005647659, -0.15466320514678955, 0.2619253396987915, -0.06048048287630081, -0.03556961193680763, -0.08728736639022827, -0.09340488910675049, -0.10566096752882004, 0.006366437301039696, 0.14570489525794983, -0.292911559343338, 0.14539030194282532, 0.11306531727313995, 0.00198747543618083, 0.15460455417633057, 0.00929630734026432, 0.01738339476287365, -0.069617860019207, -0.10768578201532364, -0.19330061972141266, -0.09572115540504456, 0.04915003478527069, -0.09638896584510803, 0.10969038307666779, -0.012391027063131332, ]),
  new Float32Array([-0.16027696430683136, 0.020012494176626205, -0.035334568470716476, -0.04681963101029396, -0.09151583909988403, -0.07571043819189072, -0.03560084104537964, -0.0950140431523323, 0.1236630231142044, -0.06702825427055359, 0.18833471834659576, 0.05780502408742905, -0.20509430766105652, -0.06681418418884277, -0.007104530930519104, 0.05459209531545639, -0.17689236998558044, -0.1470743864774704, -0.007580169476568699, -0.057867906987667084, 0.07364201545715332, 0.01218476053327322, -0.010799603536725044, 0.11499564349651337, -0.18932890892028809, -0.3052343428134918, -0.13450370728969574, -0.18215183913707733, 0.034067343920469284, -0.017238885164260864, 0.04933620244264603, 0.005281373858451843, -0.16189461946487427, -0.023352932184934616, 0.03718777000904083, 0.03656667470932007, -0.04260209575295448, 0.0010902690701186657, 0.22994983196258545, 0.03485816717147827, -0.14630940556526184, 0.006848813965916634, -0.028357097879052162, 0.28936514258384705, 0.17549265921115875, 0.053640395402908325, 0.08245579153299332, -0.08801525831222534, 0.1529184728860855, -0.261859267950058, 0.045428186655044556, 0.23514175415039062, 0.13061711192131042, 0.06787560135126114, 0.058513667434453964, -0.10454168170690536, 0.07279310375452042, 0.13445207476615906, -0.35816317796707153, 0.10673267394304276, -0.01263475976884365, -0.022399425506591797, 0.02430446818470955, -0.01666763238608837, 0.19504055380821228, 0.10098597407341003, -0.1691693365573883, -0.1287708878517151, 0.16978389024734497, -0.2547663748264313, -0.07255597412586212, 0.11226367950439453, -0.14263631403446198, -0.30969077348709106, -0.3117865324020386, 0.07236185669898987, 0.4111657440662384, 0.2652446925640106, -0.13414660096168518, 0.05371880531311035, -0.07609254121780396, -0.07841292023658752, 0.07426328957080841, 0.08969364315271378, -0.05517621338367462, -0.05298586189746857, -0.08052310347557068, 0.04842635989189148, 0.1559630036354065, 0.006301957182586193, -0.04241308942437172, 0.22821880877017975, 0.02992253378033638, 0.05638492852449417, 0.010694965720176697, 0.13291558623313904, -0.1382240206003189, -0.023167772218585014, -0.04172679781913757, 0.020182393491268158, -0.03634330630302429, 0.02575436607003212, 0.07187359035015106, 0.10909193754196167, -0.08916901797056198, 0.21314971148967743, -0.07572848349809647, -0.06700696796178818, -0.17083993554115295, -0.02892245352268219, -0.08014941960573196, -0.023260504007339478, 0.08253967761993408, -0.26551949977874756, 0.22431166470050812, 0.16678252816200256, -0.0035324236378073692, 0.17195039987564087, -0.004787660203874111, -0.03155737742781639, -0.046975962817668915, -0.07479903101921082, -0.16435222327709198, -0.07820051908493042, 0.030920442193746567, -0.05367184802889824, 0.08458723872900009, -0.03370264172554016, ]),
]

var monthNames = [
  "Ianuarie", "Februarie", "Martie",
  "Aprilie", "Mai", "Iunie", "Iulie",
  "August", "Septembrie", "Octombrie",
  "Noiembrie", "Decembrie"
];


@Component({
  selector: 'app-spital-device',
  templateUrl: './spital-device.component.html',
  styleUrls: ['./spital-device.component.css']
})
export class SpitalDeviceComponent implements OnInit, AfterViewInit {
  @ViewChild("video")
  public video: ElementRef;
  
  labeledDescriptors = [];    

  @ViewChild("canvas")
  public canvas: ElementRef;
  MODEL_URL="/assets/models";
  images = [1,2,3,4,5,6,7,8, 9, 10];
  speakQueue = [];
  persons: { [id: string] : number; } = {};
  personRooms: { [id: string] : number; } = {};
  seenFrames: { [id: string] : number; } = {};
  emails: { [id: string] : string; } = {};
  faceMatcher;
  inited = false;

  displayVisible = false;
  displayMessage;


  constructor(private _http : HttpClient, private datePipe: DatePipe) { }

  ngOnInit() {
    this.persons['Mihai'] = -1;
    this.persons['Serban'] = -1;

    this.seenFrames['Mihai'] = -1;
    this.seenFrames['Serban'] = -1;  
      
    this.personRooms['Mihai'] = 3;
    this.personRooms['Serban'] = 5;

    this.emails['Mihai'] = "sefu@sefu";
    this.emails['Serban'] = "sefusss@sefu";
    
    
    this.loadModels().then(loaded => {
      this.faceMatcher = new FaceMatcher([new faceapi.LabeledFaceDescriptors("Mihai", mihai_face), new faceapi.LabeledFaceDescriptors("Serban", serban_face)]);
      console.log("Faces loaded!");
      setInterval(()=> { this.check_face() }, 500);
      // this.initFaces().then(k => {
      //   console.log("done!");
      // });
    })
  }

  
  dateFormater(date): string {
    let tmpDate = new Date(date);
    console.log(tmpDate);
    var day = tmpDate.getDate();
    var monthIndex = tmpDate.getMonth();
    return day + ' ' + monthNames[monthIndex];
  }

  async initFaces() {
    var dect = [];
    for (let i = 1; i <= 10; i++) {
      let doc:any = document.getElementById("img-" + i);
      const fullFaceDescription = await faceapi
          .detectSingleFace(doc)
          .withFaceLandmarks()
          .withFaceDescriptor()
      if (!isNullOrUndefined(fullFaceDescription)) {
          dect.push(fullFaceDescription);
          let result = "new Float32Array([";
          fullFaceDescription.descriptor.forEach(num => result += num + ", ");
          console.log(result + "]),\n");
        }
      }
    var cc = [new faceapi.LabeledFaceDescriptors("Mihai", dect.map(d => d.descriptor))];
    this.faceMatcher = new faceapi.FaceMatcher(cc);
  }

  getPersonReservation(pers) {
    let queryParam = new HttpParams().set('email', this.emails[pers]);
    return this._http.get<any>(environment.apiUrl + '/reservation/search/findByUserEmail', {params : queryParam});
  }

  async answerToPerson(pers) {
    this.getPersonReservation(pers).subscribe(result => {
      console.log(result);
      let reservation = result['_embedded']['reservation']
      if (reservation.length > 0) {
        console.log(reservation[0]);
        console.log(reservation[0]['date']);
        if (this.datePipe.transform(new Date(), 'yyyy-MM-dd') == reservation[0]['date']) {
          this.showMessage("Bun venit, " + pers + "! Doctorul te așteaptă în cabinetul " + this.personRooms[pers] + ".")
          responsiveVoice.speak("Bun venit, " + pers + "! Doctorul te așteaptă în cabinetul " + this.personRooms[pers] + ".", "Romanian Female", {rate: 1.3});
        } else {
          this.showMessage("Bun venit, " + pers + "! Din păcate programarea ta este pe " + this.dateFormater(reservation[0]['date']))
          responsiveVoice.speak("Bun venit, " + pers + "! Din păcate programarea ta este pe " + this.dateFormater(reservation[0]['date']) , "Romanian Female", {rate: 1.3});          
        }
      } else {
          this.showMessage("Bun venit, " + pers + "! Nu ai o rezervare făcută. Te rog să faci o rezervare mai întâi.")
          responsiveVoice.speak("Bun venit, " + pers + "! Nu ai o rezervare făcută. Te rog să faci o rezervare mai întâi.", "Romanian Female", {rate: 1.3});
      }
    })
    
    this.seenFrames[pers] = 0;
    this.persons[pers] = 20;
  }

  showMessage(message: String) {
      this.displayMessage = message;
      this.displayVisible = true;
      setTimeout(()=> { this.displayVisible = false }, 2500);
  }

  async check_face() {
    const input: any = document.getElementById('video');
    let detection = await faceapi.detectAllFaces(input).withFaceLandmarks().withFaceDescriptors();
    const boxes = [];
    if (detection.length > 0) {
      detection.forEach(detect => {
        const bestMatch = this.faceMatcher.findBestMatch(detect.descriptor);
        let name = bestMatch._label;
        if (bestMatch._label != "unknown") {
          if (this.persons[bestMatch._label] < 0) {
            this.seenFrames[bestMatch._label] = this.seenFrames[bestMatch._label] + 1;
            if (this.seenFrames[bestMatch._label] == 5) {
              this.answerToPerson(bestMatch._label);
            }         
          } else {
            this.persons[bestMatch._label] = 20;
          }
        }
        boxes.push(new faceapi.BoxWithText(detect.faceDetection.box, name));
      })
    }

    // const detectionsForSize = detections.map(det => det.landmarks.forSize(input.width, input.height))
    // const descriptors = detections.map(det => det.descriptor);
    // console.log(descriptors);


    

    const canvas: any = document.getElementById('canvas');
    canvas.width = input.width
    canvas.height = input.height
    faceapi.drawDetection(canvas, boxes);
    // console.log("searched!");
    
    this.persons['Mihai'] = this.persons['Mihai'] - 1;
    this.persons['Serban'] = this.persons['Serban'] - 1;

    console.log(this.persons['Mihai']);
    console.log(this.persons['Serban']);
  }
  
  async loadModels() {
    await faceapi.loadSsdMobilenetv1Model(this.MODEL_URL);
    await faceapi.loadFaceDetectionModel(this.MODEL_URL);
    await faceapi.loadFaceLandmarkModel(this.MODEL_URL);
    await faceapi.loadFaceRecognitionModel(this.MODEL_URL);
  }

  public ngAfterViewInit() {
    if(navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {
        navigator.mediaDevices.getUserMedia({ video: true }).then(stream => {
            this.video.nativeElement.src = window.URL.createObjectURL(stream);
            this.video.nativeElement.play();
        });
    }
}

}
